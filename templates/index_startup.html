<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ company.company_name }} - Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles_startup.css') }}">
</head>
<body>
<!-- Navigation -->
<nav class="navbar">
    <div class="nav-container">
        <div class="logo">RecruitHub</div>
        <ul class="nav-links">
            <li><a href="#" class="nav-link active" data-page="profile">Profile</a></li>
            <li><a href="#" class="nav-link" data-page="jobs">Post Job</a></li>
            <li><a href="#" class="nav-link" data-page="applicants">Applicants</a></li>
            <li><a href="{{ url_for('logout') }}" class="nav-link logout">Logout</a></li>
        </ul>
    </div>
</nav>

<!-- Main Container -->
<div class="main-container">
    <!-- Company Profile Page -->
    <div id="profile-page" class="page">
        <div class="company-header card">
            <div class="card-inner">
                <h1>{{ company.company_name }}</h1>
                <p class="company-description">{{ company.description }}</p>
                <a href="{{ company.website }}" target="_blank" class="website-link">
                    üåê Visit Our Website
                </a>
            </div>
        </div>

        <div class="card">
            <div class="card-inner">
                <h2>Previous Job Listings</h2>
                <div class="job-grid" id="previous-jobs">
                    {% if jobs %}
                        {% for job in jobs %}
                        <div class="job-card">
                            <h3>{{ job.title }}</h3>
                            <p class="job-type">Type: {{ job.job_type }}</p>
                            <p class="stipend">Stipend: {{ job.stipend }}</p>
                            <div class="job-description">
                                <h4>Description:</h4>
                                <p>{{ job.description }}</p>
                            </div>
                            <div class="job-requirements">
                                <h4>Requirements:</h4>
                                <p>{{ job.requirements }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="no-jobs-message">
                            <h3>No Jobs Posted Yet</h3>
                            <p>Click on "Post Job" to create your first job listing.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Job Posting Page -->
    <div id="jobs-page" class="page" style="display: none;">
        <div class="card">
            <div class="card-inner">
                <h2>Post a New Job</h2>
                <form id="job-form" method="POST" action="{{ url_for('index') }}">
                    <div class="form-group">
                        <label for="job-type">Job Title</label>
                        <input type="text" id="job-type" name="jobType" placeholder="e.g., Software Engineer Intern">
                        <div class="error" id="job-type-error">Job title is required</div>
                    </div>

                    <div class="form-group">
                        <label for="job_type">Job Type</label>
                        <input type="text" id="job_type" name="jobtype" placeholder="Internship / Project">
                        <div class="error" id="job_type-error">Job type is required</div>
                    </div>

                    <div class="form-group">
                        <label for="stipend">Stipend (per month)</label>
                        <input type="text" id="stipend" name="stipend" placeholder="e.g., $2000 / NA">
                        <div class="error" id="stipend-error">Stipend is required</div>
                    </div>

                    <div class="form-group">
                        <label for="description">Job Description</label>
                        <textarea id="description" name="description" placeholder="Describe the role, responsibilities, and what the candidate will learn..."></textarea>
                        <div class="error" id="description-error">Description is required</div>
                    </div>

                    <div class="form-group">
                        <label for="requirements">Requirements</label>
                        <textarea id="requirements" name="requirements" placeholder="List the skills, qualifications, and experience needed..."></textarea>
                        <div class="error" id="requirements-error">Requirements are required</div>
                    </div>

                    <button type="submit" class="btn">Post Job</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Applicants Page -->
    <div id="applicants-page" class="page" style="display: none;">
        <div class="card">
            <div class="card-inner">
                <h2>Applicants</h2>
                <div class="applicant-grid" id="applicants-list">
                    {% if students %}
                        {% for student in students %}
                        <div class="applicant-card" onclick="showApplicantDetails('{{ student.id }}')">
                            <h3 class="applicant-name">{{ student.name }}</h3>
                            <p class="college-roll">Roll: {{ student.college_roll }}</p>
                            {% if student.skillset %}
                                <p class="skills">{{ student.skillset }}</p>
                            {% endif %}
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="no-applicants-message">
                            <h3>No Applicants Yet</h3>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Applicant -->
<div id="applicant-modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <div id="modal-body">
            {% for student in students %}
            <div class="student-detail" id="student-{{ student.id }}" style="display: none;">
                <h2>{{ student.name }}</h2>
                <p>Roll Number: {{ student.college_roll }}</p>
                {% if student.about %}
                <p>About: {{ student.about }}</p>
                {% endif %}
                {% if student.skillset %}
                <p>Skills: {{ student.skillset }}</p>
                {% endif %}
                
                <!-- ‚úÖ Show which jobs this student applied for -->
                <div class="applied-jobs">
                    <h4>Applied For:</h4>
                    <ul>
                        {% for listing in student.listings %}
                            <li>{{ listing.requirements }}</li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="profile-links">
                    {% if student.resume %}<a href="{{ url_for('static', filename=student.resume) }}" target="_blank" class="btn">Resume</a>{% endif %}
                    {% if student.github %}<a href="{{ student.github }}" target="_blank" class="btn">GitHub</a>{% endif %}
                    {% if student.linkedin %}<a href="{{ student.linkedin }}" target="_blank" class="btn">LinkedIn</a>{% endif %}
                    {% if student.portfolio %}<a href="{{ student.portfolio }}" target="_blank" class="btn">Portfolio</a>{% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='scripts/script_startup.js') }}"></script>
</body>
</html>
